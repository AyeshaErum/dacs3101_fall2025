<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mini Secure Mail</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .hidden { display: none; }
    .mail-item { border: 1px solid #ccc; padding: 8px; margin:8px 0; white-space: pre-wrap; text-align: left;}
  
  
  </style>
</head>
<body>
  <div id="login-screen" style="text-align:center;">
    <h2>Login</h2>
    <input type="text" id="email" placeholder="Email" />
    <input type="password" id="password" placeholder="Password" /> <br>
    <button onclick="login()">Login</button>
    <p id="login-msg"></p>
    <p><a href="register.html">Create an account</a></p>
  </div>

  <div id="mail-screen" class="hidden" style="text-align:center;">
    <h2>Welcome, <span id="user-email"></span></h2>
    <!-- IMPORT PRIVATE KEY BUNDLE (for demo/local decryption) -->
<div id="import-keys-area" class="hidden" style="margin:10px auto; max-width:640px; text-align:left; border:1px dashed #aaa; padding:10px;">
  <strong>Private keys not found locally.</strong>
  <p>If you registered on a different browser or lost localStorage, paste your private JWK bundle here (the JSON created at registration). This keeps your private keys only in this browser's localStorage.</p>
  <textarea id="importPrivTextarea" placeholder='Paste private JWK bundle here, e.g. {"enc":{...},"sign":{...},"email":"you@..."}' style="width:100%;height:120px;"></textarea>
  <div style="margin-top:6px;">
    <button onclick="importPrivateBundle()">Import Private Keys</button>
    <button onclick="cancelImportPrivate()">Cancel</button>
    <span id="importPrivMsg" style="margin-left:10px;"></span>
  </div>
</div>

    <div class="tabs">
      <button onclick="showTab('inbox')">Inbox</button>
      <button onclick="showTab('compose')">Compose</button>
      <button onclick="logout()">Logout</button>
    </div>

    <div id="inbox-tab" class="tab-content">
      <h3>Inbox</h3>
      <div id="inbox">(loading...)</div>
    </div>

    <div id="compose-tab" class="tab-content hidden">
      <h3>Compose Email</h3>
      <input type="text" id="to" placeholder="To" /> <br>
      <input type="text" id="subject" placeholder="Subject" />  <br>
      <textarea id="body" placeholder="Write your message..."></textarea> <br>
      <button onclick="sendMail()">Send</button>
      <p id="send-msg"></p>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
